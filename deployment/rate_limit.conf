# ABOUTME: Nginx rate limiting configuration for TTS endpoints
# ABOUTME: Protects against abuse while allowing legitimate usage

# Apply rate limiting with burst capability
limit_req zone=tts burst=5 nodelay;

# Connection limiting per IP
limit_conn perip 5;

# Custom error responses
limit_req_status 429;
limit_conn_status 429;

# Add rate limit headers
add_header X-RateLimit-Limit 2;
add_header X-RateLimit-Remaining $limit_req_remaining;